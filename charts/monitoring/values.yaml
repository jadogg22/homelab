# charts/monitoring/values.yaml

# ---------------------------------------------------------------------
# 1. Grafana (The Dashboard)
# ---------------------------------------------------------------------
grafana:
  enabled: true
  
  # --- SECRETS ---
  admin:
    existingSecret: "monitoring-secrets"
    userKey: "grafana-admin-user"
    passwordKey: "grafana-admin-password"
  # -------------------
  ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
      - grafana.jadogg.com
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
    tls:
      - secretName: jadogg-wildcard-cert
        hosts:
          - grafana.jadogg.com

  persistence:
    enabled: true
    storageClassName: "longhorn" 
    accessModes: ["ReadWriteOnce"]
    size: 10Gi

# ---------------------------------------------------------------------
# 2. Prometheus (The Database)
# ---------------------------------------------------------------------
prometheus:
  enabled: true
  prometheusSpec:
    storageSpec: 
      volumeClaimTemplate:
        spec:
          storageClassName: "longhorn" 
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 50Gi 

    # Retention: How long to keep data?
    retention: 14d 
    
    # Ingress for Prometheus itself 
    externalUrl: https://prometheus.jadogg.com
    
  ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
      - prometheus.jadogg.com
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
    tls:
      - secretName: jadogg-wildcard-cert
        hosts:
          - prometheus.jadogg.com

# ---------------------------------------------------------------------
# 3. Alertmanager (The Notifier)
# ---------------------------------------------------------------------
alertmanager:
  enabled: true
  alertmanagerSpec:
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: "longhorn"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi

# ---------------------------------------------------------------------
# 4. Exporters & Utilities
# ---------------------------------------------------------------------
nodeExporter:
  enabled: true

kubeStateMetrics:
  enabled: true

# Clean up default rules that might not apply to your bare metal cluster
defaultRules:
  create: true
  rules:
    etcd: false      
    kubeScheduler: false
